class Question:
    def __init__(self, id, text, choices):
        self.id = id
        self.text = text
        self.choices = choices  # List of dictionaries {'text': str, 'scores': {'P': int, 'M': int, 'S': int, 'I': int}}

# Mapping keys: P=Physical, M=Mental, S=Social, I=Intellectual

questions = [
    Question(1, "เมื่อคุณทำงานพลาดและโดนตำหนิ สิ่งแรกที่คุณทำเมื่อถึงบ้านคืออะไร?", [
        {'text': 'ออกไปวิ่งหรือออกกำลังกายหนักๆ ให้เหงื่อออก', 'scores': {'P': 10, 'M': 5, 'S': 0, 'I': 0}},
        {'text': 'นั่งทบทวนข้อผิดพลาดและวางแผนแก้ไขเงียบๆ คนเดียว', 'scores': {'P': 0, 'M': 5, 'S': 0, 'I': 10}},
        {'text': 'โทรหาเพื่อนสนิทหรือคนรักเพื่อระบายความรู้สึก', 'scores': {'P': 0, 'M': 5, 'S': 10, 'I': 0}},
        {'text': 'นอนหลับทันทีเพื่อหนีความเครียด', 'scores': {'P': 5, 'M': 5, 'S': 0, 'I': 0}}
    ]),
    Question(2, "ถ้าโทรศัพท์คุณแบตหมดในวันที่ต้องอยู่คนเดียว คุณรู้สึกอย่างไร?", [
        {'text': 'กระวนกระวาย รู้สึกตัดขาดจากโลกภายนอก', 'scores': {'P': 0, 'M': 2, 'S': 10, 'I': 0}},
        {'text': 'เฉยๆ ถือเป็นโอกาสพักสายตาและร่างกาย', 'scores': {'P': 8, 'M': 8, 'S': 0, 'I': 0}},
        {'text': 'หยิบหนังสือมาอ่านหรือหาอะไรทำที่มีประโยชน์', 'scores': {'P': 0, 'M': 5, 'S': 0, 'I': 10}},
        {'text': 'รู้สึกเหงาและกังวลลึกๆ', 'scores': {'P': 0, 'M': 2, 'S': 5, 'I': 0}}
    ]),
    Question(3, "เมื่อมีเวลาว่าง 1 ชั่วโมงก่อนนอน คุณมักจะเลือกทำอะไร?", [
        {'text': 'เล่นโซเชียลมีเดีย ตอบแชทเพื่อน', 'scores': {'P': 2, 'M': 5, 'S': 10, 'I': 2}},
        {'text': 'ยืดเหยียดร่างกาย หรือทำสมาธิ', 'scores': {'P': 10, 'M': 10, 'S': 0, 'I': 0}},
        {'text': 'อ่านบทความวิชาการหรือข่าวสารที่น่าสนใจ', 'scores': {'P': 0, 'M': 5, 'S': 0, 'I': 10}},
        {'text': 'ดูซีรีส์หรือรายการบันเทิงเพื่อผ่อนคลายเต็มที่', 'scores': {'P': 5, 'M': 8, 'S': 2, 'I': 2}}
    ]),
    Question(4, "ในงานปาร์ตี้ที่คุณไม่สนิทกับใครเลย คุณจะทำอย่างไร?", [
        {'text': 'พยายามเข้าไปทักทายและทำความรู้จักคนใหม่ๆ', 'scores': {'P': 0, 'M': 5, 'S': 10, 'I': 5}},
        {'text': 'หาจังหวะกลับบ้านให้เร็วที่สุดเพื่อพักผ่อน', 'scores': {'P': 8, 'M': 5, 'S': 0, 'I': 0}},
        {'text': 'ยืนสังเกตการณ์ผู้คนและวิเคราะห์พฤติกรรมเงียบๆ', 'scores': {'P': 0, 'M': 5, 'S': 0, 'I': 10}},
        {'text': 'หาเครื่องดื่มหรืออาหารทานแก้เขิน', 'scores': {'P': 5, 'M': 5, 'S': 2, 'I': 0}}
    ]),
    Question(5, "ถ้าคุณถูกหวยรางวัลที่ 1 สิ่งแรกที่คุณคิดจะทำคือ?", [
        {'text': 'วางแผนการลงทุนเพื่อความมั่นคงในอนาคต', 'scores': {'P': 0, 'M': 5, 'S': 0, 'I': 10}},
        {'text': 'จัดงานเลี้ยงฉลองใหญ่โตกับเพื่อนฝูงและญาติมิตร', 'scores': {'P': 0, 'M': 5, 'S': 10, 'I': 0}},
        {'text': 'ซื้อคอร์สดูแลสุขภาพและจ้างเทรนเนอร์ส่วนตัว', 'scores': {'P': 10, 'M': 8, 'S': 0, 'I': 0}},
        {'text': 'บริจาคและช่วยเหลือสังคมตามความตั้งใจ', 'scores': {'P': 0, 'M': 10, 'S': 8, 'I': 5}}
    ]),
    Question(6, "เพื่อนร่วมงานขอให้ช่วยงานด่วนในวันหยุดที่คุณวางแผนพักผ่อนไว้แล้ว", [
        {'text': 'ตอบตกลงทันทีเพราะกลัวเขาจะลำบาก', 'scores': {'P': 2, 'M': 2, 'S': 10, 'I': 0}},
        {'text': 'ปฏิเสธอย่างสุภาพพร้อมเหตุผล เพื่อรักษาสมดุลชีวิต', 'scores': {'P': 8, 'M': 10, 'S': 5, 'I': 5}},
        {'text': 'ต่อรองขอทำแค่บางส่วนเท่าที่ไหว', 'scores': {'P': 5, 'M': 5, 'S': 5, 'I': 8}},
        {'text': 'รับปากไปก่อนแล้วค่อยเครียดทีหลัง', 'scores': {'P': 0, 'M': 0, 'S': 8, 'I': 0}}
    ]),
    Question(7, "คุณรู้สึกภูมิใจที่สุดเมื่อ...", [
        {'text': 'แก้ปัญหาซับซ้อนที่คนอื่นทำไม่ได้สำเร็จ', 'scores': {'P': 0, 'M': 5, 'S': 0, 'I': 10}},
        {'text': 'มีรูปร่างและสุขภาพที่ดี แข็งแรง', 'scores': {'P': 10, 'M': 8, 'S': 2, 'I': 0}},
        {'text': 'เป็นที่รักและที่พึ่งของเพื่อนฝูง', 'scores': {'P': 0, 'M': 8, 'S': 10, 'I': 0}},
        {'text': 'สามารถจัดการอารมณ์ตัวเองได้ดีในสถานการณ์กดดัน', 'scores': {'P': 5, 'M': 10, 'S': 0, 'I': 5}}
    ]),
    Question(8, "เมื่อเจอปัญหาที่คิดไม่ตก คุณมักจะ...", [
        {'text': 'ปรึกษาผู้รู้หรือค้นหาข้อมูลเพิ่มเติม', 'scores': {'P': 0, 'M': 5, 'S': 2, 'I': 10}},
        {'text': 'ออกไปเดินเล่นหรือเปลี่ยนบรรยากาศ', 'scores': {'P': 8, 'M': 8, 'S': 0, 'I': 2}},
        {'text': 'คุยกับเพื่อนสนิทเพื่อระบายและขอความเห็น', 'scores': {'P': 0, 'M': 5, 'S': 10, 'I': 0}},
        {'text': 'เก็บไว้คนเดียวและพยายามไม่คิดมาก', 'scores': {'P': 2, 'M': 2, 'S': 0, 'I': 0}}
    ]),
    Question(9, "กิจกรรมวันหยุดสุดสัปดาห์ในฝันของคุณคือ?", [
        {'text': 'เข้าเวิร์กชอปเรียนรู้ทักษะใหม่ๆ', 'scores': {'P': 2, 'M': 5, 'S': 2, 'I': 10}},
        {'text': 'ไปปีนเขาหรือทำกิจกรรม Adventure', 'scores': {'P': 10, 'M': 8, 'S': 5, 'I': 2}},
        {'text': 'ปาร์ตี้สังสรรค์กับกลุ่มเพื่อน', 'scores': {'P': 0, 'M': 5, 'S': 10, 'I': 0}},
        {'text': 'นอนอ่านหนังสือเงียบๆ ที่บ้าน', 'scores': {'P': 5, 'M': 8, 'S': 0, 'I': 8}}
    ]),
    Question(10, "ถ้าต้องเลือกของขวัญให้ตัวเอง 1 ชิ้น", [
        {'text': 'หนังสือชุดใหญ่ที่อยากอ่านมานาน', 'scores': {'P': 0, 'M': 5, 'S': 0, 'I': 10}},
        {'text': 'อุปกรณ์ออกกำลังกายรุ่นใหม่ล่าสุด', 'scores': {'P': 10, 'M': 5, 'S': 0, 'I': 0}},
        {'text': 'ทริปเที่ยวต่างประเทศกับแก๊งเพื่อน', 'scores': {'P': 5, 'M': 8, 'S': 10, 'I': 2}},
        {'text': 'คอร์สสปาเพื่อผ่อนคลายร่างกายและจิตใจ', 'scores': {'P': 8, 'M': 10, 'S': 0, 'I': 0}}
    ]),
    Question(11, "เมื่อคุณเห็นคนทะเลาะกันต่อหน้า คุณจะ...", [
        {'text': 'เข้าไปช่วยไกล่เกลี่ยด้วยเหตุผล', 'scores': {'P': 2, 'M': 5, 'S': 8, 'I': 8}},
        {'text': 'หลีกเลี่ยงและเดินหนีไปเพื่อความปลอดภัย', 'scores': {'P': 8, 'M': 5, 'S': 0, 'I': 2}},
        {'text': 'เรียกคนอื่นมาช่วยจัดการ', 'scores': {'P': 2, 'M': 5, 'S': 5, 'I': 5}},
        {'text': 'ยืนดูและวิเคราะห์สาเหตุของปัญหา', 'scores': {'P': 0, 'M': 2, 'S': 0, 'I': 10}}
    ]),
    Question(12, "คุณคิดว่าความสำเร็จสูงสุดในชีวิตคือ?", [
        {'text': 'การมีความรู้ความสามารถเป็นเลิศ', 'scores': {'P': 0, 'M': 5, 'S': 0, 'I': 10}},
        {'text': 'การมีสุขภาพแข็งแรง อายุยืนยาว', 'scores': {'P': 10, 'M': 8, 'S': 2, 'I': 0}},
        {'text': 'การมีครอบครัวและมิตรสหายที่อบอุ่น', 'scores': {'P': 0, 'M': 8, 'S': 10, 'I': 0}},
        {'text': 'การมีความสงบสุขทางใจ ไม่ทุกข์ร้อน', 'scores': {'P': 5, 'M': 10, 'S': 0, 'I': 5}}
    ]),
    Question(13, "เมื่อตื่นนอนตอนเช้า สิ่งแรกที่คุณมักจะทำคือ...", [
        {'text': 'เช็คข่าวสารบ้านเมืองหรืออีเมลงาน', 'scores': {'P': 0, 'M': 2, 'S': 0, 'I': 8}},
        {'text': 'ดื่มน้ำและยืดเส้นยืดสาย', 'scores': {'P': 10, 'M': 8, 'S': 0, 'I': 0}},
        {'text': 'ทักทายคนในครอบครัวหรือส่งข้อความหาคนรัก', 'scores': {'P': 0, 'M': 5, 'S': 10, 'I': 0}},
        {'text': 'นั่งนิ่งๆ สักพักเพื่อเตรียมใจรับวันใหม่', 'scores': {'P': 2, 'M': 10, 'S': 0, 'I': 2}}
    ]),
    Question(14, "ถ้าคุณต้องติดเกาะคนเดียว 1 เดือน สิ่งที่คุณจะนำติดตัวไปคือ?", [
        {'text': 'หนังสือรวบรวมความรู้การเอาตัวรอด', 'scores': {'P': 2, 'M': 5, 'S': 0, 'I': 10}},
        {'text': 'อุปกรณ์ออกกำลังกายหรือกีฬาทางน้ำ', 'scores': {'P': 10, 'M': 5, 'S': 0, 'I': 0}},
        {'text': 'รูปถ่ายครอบครัวและคนที่รัก', 'scores': {'P': 0, 'M': 8, 'S': 10, 'I': 0}},
        {'text': 'สมุดบันทึกและปากกาไว้เขียนระบายความรู้สึก', 'scores': {'P': 0, 'M': 10, 'S': 0, 'I': 5}}
    ]),
    Question(15, "คุณจัดการกับความโกรธอย่างไร?", [
        {'text': 'วิเคราะห์สาเหตุว่าทำไมถึงโกรธและหาทางแก้', 'scores': {'P': 0, 'M': 5, 'S': 0, 'I': 10}},
        {'text': 'ไปต่อยมวยหรือวิ่งให้หายหงุดหงิด', 'scores': {'P': 10, 'M': 8, 'S': 0, 'I': 0}},
        {'text': 'เล่าให้เพื่อนฟังเพื่อให้เขาเข้าข้างเรา', 'scores': {'P': 0, 'M': 5, 'S': 10, 'I': 2}},
        {'text': 'กำหนดลมหายใจเข้า-ออก เพื่อระงับอารมณ์', 'scores': {'P': 5, 'M': 10, 'S': 0, 'I': 2}}
    ])
]

# Academic References & Logic
references = {
    'Sleep': "อ้างอิงจาก National Sleep Foundation, การตอบสนองต่อแสงสีฟ้าและการจัดการเวลาตื่นมีผลต่อระดับ Cortisol ในวันถัดไป",
    'Social': "ตามทฤษฎี Attachment Theory, วิธีที่คุณตอบโต้กับเพื่อนในสถานการณ์คับขันสะท้อนถึงความมั่นคงทางอารมณ์ (Security)",
    'Coping': "การเลือกวิธี 'ระบาย' แทนการ 'แก้ไข' ในบางสถานการณ์ สอดคล้องกับ Emotion-focused coping ซึ่งจำเป็นในระยะสั้น",
    'Physical': "การออกกำลังกายช่วยหลั่งสาร Endorphin ซึ่งเป็นสารเคมีในสมองที่ช่วยลดความเจ็บปวดและทำให้รู้สึกมีความสุข (Mayo Clinic)",
    'Intellectual': "การเรียนรู้ตลอดชีวิต (Lifelong Learning) ช่วยชะลอความเสื่อมของสมองและเพิ่มความยืดหยุ่นทางความคิด (Cognitive Flexibility)",
    'Boundaries': "การตั้งขอบเขต (Boundaries) ที่ชัดเจนช่วยป้องกันภาวะหมดไฟ (Burnout) และรักษาความสัมพันธ์ให้ยั่งยืน (APA)"
}

profiles = {
    'Overachiever': {
        'desc': 'The Overachiever (นักล่าความสำเร็จ)',
        'detail': 'คุณมุ่งมั่นกับการทำงานและการใช้สติปัญญาอย่างหนัก แต่อาจละเลยสุขภาพกายและการพักผ่อน',
        'recommendation': 'ควรหันมาดูแลสุขภาพกายและให้เวลาตัวเองพักผ่อนบ้าง ลองใช้เทคนิค Pomodoro ในการทำงานเพื่อลดความล้า',
        'criteria': lambda s: s['I'] > 70 and s['P'] < 50
    },
    'Harmony Seeker': {
        'desc': 'The Harmony Seeker (นักแสวงหาความกลมกลืน)',
        'detail': 'คุณให้ความสำคัญกับความสัมพันธ์และคนรอบข้างมาก แต่อาจลืมดูแลความรู้สึกและความต้องการของตัวเอง',
        'recommendation': 'ฝึกการปฏิเสธ (Say No) และหันกลับมาดูแลใจตัวเอง (Self-care) ให้มากขึ้น',
        'criteria': lambda s: s['S'] > 70 and s['M'] < 50
    },
    'Lone Wolf': {
        'desc': 'The Lone Wolf (หมาป่าเดียวดาย)',
        'detail': 'คุณมีความเข้มแข็งภายในและพึ่งพาตัวเองได้ดี แต่อาจขาดการเชื่อมโยงกับผู้อื่น',
        'recommendation': 'ลองเปิดใจเข้าร่วมกิจกรรมกลุ่มหรือแชร์ความรู้สึกกับคนสนิทบ้าง เพื่อสร้าง Social Support',
        'criteria': lambda s: s['M'] > 70 and s['S'] < 40
    },
    'Balanced Sage': {
        'desc': 'The Balanced Sage (ปราชญ์ผู้สมดุล)',
        'detail': 'คุณมีการจัดสรรเวลาและให้ความสำคัญกับทุกด้านของชีวิตได้อย่างดีเยี่ยม',
        'recommendation': 'รักษามาตรฐานนี้ไว้! และแบ่งปันแนวคิดดีๆ ให้กับคนรอบข้าง',
        'criteria': lambda s: all(v > 60 for v in s.values())
    }
}

# Fallback profile
default_profile = {
    'desc': 'The Explorer (นักสำรวจชีวิต)',
    'detail': 'คุณกำลังค้นหาเส้นทางที่ลงตัวสำหรับตัวเอง มีบางด้านที่โดดเด่นและบางด้านที่พัฒนาได้อีก',
    'recommendation': 'ลองสังเกตกราฟคะแนนและเลือกพัฒนาด้านที่คะแนนน้อยที่สุดก่อนเป็นอันดับแรก'
}
